<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kei Taketsuna">
<meta name="dcterms.date" content="2025-03-27">
<meta name="description" content="Using ElevenLabs">

<title>Breaking Boundaries with ElevenLabs: My Journey Through AI Voice Technology – My exploration of capabilities of LLMs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-630147fbe0b9ab2b2a517857e522e257.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">My exploration of capabilities of LLMs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/keitake123"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Breaking Boundaries with ElevenLabs: My Journey Through AI Voice Technology</h1>
                  <div>
        <div class="description">
          Using ElevenLabs
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">Elevenlabs</div>
                <div class="quarto-category">Voice AI</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Kei Taketsuna </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 27, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="breaking-boundaries-with-elevenlabs-my-journey-through-ai-voice-technology" class="level1">
<h1>Breaking Boundaries with ElevenLabs: My Journey Through AI Voice Technology</h1>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>As someone deeply interested in the intersection of artificial intelligence, language, and storytelling, I recently explored a groundbreaking platform called ElevenLabs. Marketed as the most realistic AI audio platform, it supports everything from real-time voice cloning to multilingual dubbing. At first, I approached it with curiosity—just to test out a few features. But I was quickly blown away by how powerful, accurate, and intuitive it actually was.</p>
<p>This blog post is a guided tour of my experience using ElevenLabs. I’ll walk you through each major function using real screenshots, explaining what each feature does and how it performed. Whether it was creating a synthetic version of my voice or dubbing my words into another language, the platform constantly impressed me. At the end of the post, I’ll share key takeaways, including the implications this has for creative industries, accessibility, and even ethics.</p>
<p>If you’re a creator, developer, educator, or just someone fascinated by how far AI has come in natural language and audio generation, this is a glimpse into what the future already looks like.</p>
<hr>
</section>
<section id="exploring-elevenlabs-features" class="level2">
<h2 class="anchored" data-anchor-id="exploring-elevenlabs-features">Exploring ElevenLabs Features</h2>
<section id="text-to-speech-studio" class="level3">
<h3 class="anchored" data-anchor-id="text-to-speech-studio">1. Text-to-Speech Studio</h3>
<p><img src="a.png" width="900/"></p>
<p>The foundation of ElevenLabs is its text-to-speech functionality. Here, you type out a script and select a voice that best suits your content. There are voice styles for everything—from advertisements and audiobooks to news delivery and friendly conversations. I tried using the “Brian” voice to narrate a promotional script, and the result sounded incredibly natural. It had pacing, emphasis, and even a touch of personality.</p>
<p>What makes this special is the ability to choose voices that aren’t just generic AI narrators—they’re specialized and emotionally expressive. You can also preview and regenerate results quickly, making this ideal for rapid content creation.</p>
<hr>
</section>
<section id="speech-to-text-transcription" class="level3">
<h3 class="anchored" data-anchor-id="speech-to-text-transcription">2. Speech-to-Text Transcription</h3>
<p><img src="b.png" width="900/"></p>
<p>I uploaded a sample audio recording of a fictional interview. ElevenLabs automatically identified individual speakers, labeled each turn of dialogue, and transcribed it flawlessly. The transcription was accurate even with casual or overlapping speech, which makes it a strong tool for professionals who handle interviews, podcasts, or client calls.</p>
<p>Its applications go beyond convenience. Journalists, medical transcriptionists, and corporate teams can benefit from the time saved and the consistency of the output.</p>
<hr>
</section>
<section id="conversational-ai" class="level3">
<h3 class="anchored" data-anchor-id="conversational-ai">3. Conversational AI</h3>
<p><img src="c.png" width="900/"></p>
<p>ElevenLabs features an interactive voice-based AI system that simulates real-time dialogue through a “Try a Call” interface. You can choose roles like game characters, support agents, or trainers. I tried speaking with a game character named Eric, and the realism was astonishing. The responses were coherent, timely, and appropriately voiced with contextual nuance.</p>
<p>This has massive potential in gaming, training, customer service, and role-based simulations. Developers can build characters that feel alive, support agents that operate 24/7, or tutors that adjust to user queries.</p>
<hr>
</section>
<section id="multilingual-ai-dubbing" class="level3">
<h3 class="anchored" data-anchor-id="multilingual-ai-dubbing">4. Multilingual AI Dubbing</h3>
<p><img src="d.png" width="900/"></p>
<p>This feature allows users to localize videos into more than 29 languages. You upload a video, and the system not only translates the audio but also synchronizes it with the speaker’s lip movements. I watched a video originally in English dubbed into Hindi, and the result looked and sounded native.</p>
<p>This could revolutionize global media production. Content creators on YouTube, documentary producers, or educators looking to reach multilingual audiences can do so with just a few clicks.</p>
<hr>
</section>
<section id="voice-cloning" class="level3">
<h3 class="anchored" data-anchor-id="voice-cloning">5. Voice Cloning</h3>
<p><img src="e.png" width="900/"></p>
<p>This is where things went from impressive to extraordinary. I uploaded a short recording of my voice, and ElevenLabs created a perfect synthetic version of it. Within seconds, I had access to a digital replica of my voice that could read anything I typed.</p>
<p>What’s even more impressive is that I used this clone to generate speech in other languages. When I tested it with Chinese text, a native-speaking friend confirmed that the tone and pronunciation were spot on. The voice wasn’t just realistic—it was mine, speaking fluently across linguistic boundaries.</p>
<hr>
</section>
<section id="elevenreader" class="level3">
<h3 class="anchored" data-anchor-id="elevenreader">6. ElevenReader</h3>
<p><img src="f.png" width="900/"></p>
<p>This feature is designed for people who want written content read aloud. You can upload PDFs, news articles, or ebooks and have them narrated by one of the platform’s voices. It’s ideal for audiobook generation, accessible reading, or simply multitasking.</p>
<p>The interface is mobile-friendly, allowing you to carry your digital narrator anywhere. Whether you’re studying for class, digesting long-form journalism, or consuming a novel, this tool makes it frictionless.</p>
<hr>
</section>
<section id="text-to-speech-editor" class="level3">
<h3 class="anchored" data-anchor-id="text-to-speech-editor">7. Text-to-Speech Editor</h3>
<p><img src="g.png" width="900/"></p>
<p>In this tool, I typed a simple sentence: “Hi, my name is Keiichi Taketsuna.” I selected the voice named Rachel and was able to tweak the delivery instantly. You can regenerate results, change the speaker’s tone, and fine-tune pronunciation and pacing.</p>
<p>This is incredibly useful for anyone creating audio scripts, ads, or product tutorials. It also allows for real-time testing and rapid iteration without going through an audio engineer.</p>
<hr>
</section>
<section id="voice-changer" class="level3">
<h3 class="anchored" data-anchor-id="voice-changer">8. Voice Changer</h3>
<p><img src="h.png" width="900/"></p>
<p>If you have existing audio, ElevenLabs allows you to overlay a new voice on top of it. I uploaded a sample and replaced my voice with Rachel’s. It maintained the emotional expression while completely transforming the speaker’s identity.</p>
<p>It also offers controls for similarity, background noise, and exaggeration. Use cases include character voice creation, anonymity protection, or experimenting with narrative tone in projects.</p>
<hr>
</section>
<section id="sound-effects-generator" class="level3">
<h3 class="anchored" data-anchor-id="sound-effects-generator">9. Sound Effects Generator</h3>
<p><img src="i.png" width="900/"></p>
<p>Beyond voice, the platform also generates professional-grade sound effects. I searched for “Huge Epic Braam”—a classic sound used in trailers—and it produced a perfect audio clip.</p>
<p>This could replace stock libraries for indie game developers, podcast creators, or filmmakers. The generation is fast, customizable, and copyright-safe.</p>
<hr>
</section>
<section id="analytics-and-voice-agent-tracking" class="level3">
<h3 class="anchored" data-anchor-id="analytics-and-voice-agent-tracking">10. Analytics and Voice Agent Tracking</h3>
<p><img src="j.png" width="900/"></p>
<p>The final screenshot comes from the analytics dashboard. It displays call data for conversational agents, including total duration, success rates, and credits used. This is ideal for tracking the performance of AI agents in customer-facing roles.</p>
<p>For businesses deploying AI voice support, these metrics help improve efficiency, monitor cost, and ensure high service quality.</p>
<hr>
</section>
</section>
<section id="key-takeaways-and-reflections" class="level2">
<h2 class="anchored" data-anchor-id="key-takeaways-and-reflections">Key Takeaways and Reflections</h2>
<section id="voice-cloning-accuracy-is-surreal" class="level3">
<h3 class="anchored" data-anchor-id="voice-cloning-accuracy-is-surreal">Voice Cloning Accuracy Is Surreal</h3>
<p>Using just a small sample of my voice, ElevenLabs created a synthetic version that was practically indistinguishable from the real thing. I tested it across multiple scripts and even different languages. When I had it read a Chinese passage, my friend said it sounded exactly like me—and the pronunciation was flawless. That level of precision left me speechless.</p>
</section>
<section id="diverse-real-world-applications" class="level3">
<h3 class="anchored" data-anchor-id="diverse-real-world-applications">Diverse Real-World Applications</h3>
<p>What stood out most is how applicable this technology is across industries: - Audiobook creation without needing a human narrator - Game development with fully voiced NPCs - Multilingual film dubbing and content localization - Podcast or video narration at scale - 24/7 support agents for websites or phone systems - Enhanced accessibility for users with visual impairments</p>
<p>This isn’t just about cool technology. It’s about scalability, personalization, and reach.</p>
</section>
<section id="ethical-and-industry-implications" class="level3">
<h3 class="anchored" data-anchor-id="ethical-and-industry-implications">Ethical and Industry Implications</h3>
<p>As exciting as this is, it brings up serious questions. If AI can perfectly replicate human voices, what does that mean for voice actors? How do we protect our vocal identity from misuse? There’s a conversation here that we need to have—about consent, security, and fair use of synthetic voices.</p>
<hr>
</section>
</section>
<section id="final-thoughts" class="level2">
<h2 class="anchored" data-anchor-id="final-thoughts">Final Thoughts</h2>
<p>Exploring ElevenLabs felt like stepping into the future of human-computer interaction. The voice synthesis was so realistic it blurred the line between digital and organic. From replicating my own voice to narrating texts in languages I don’t even speak, the capabilities felt limitless.</p>
<p>Whether you’re a solo creator, media producer, educator, or software developer, the tools here aren’t just useful—they’re transformative. We’re quickly entering an era where high-quality voiceovers, dubbed content, and synthetic narration will be generated on-demand with just a few clicks.</p>
<p>What amazed me most was how personal it all felt. This wasn’t just a robotic assistant reading lines—it was my voice, my style, my cadence. And now I can use it to tell stories, deliver information, and communicate across borders.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/keitake123\.github\.io\/comm4190_S25_Using_LLMs_Blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>